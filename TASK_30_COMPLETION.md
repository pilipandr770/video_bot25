# Task 30: Deployment –Ω–∞ Render.com - –ó–∞–≤–µ—Ä—à–µ–Ω–æ ‚úÖ

## –°—Ç–∞—Ç—É—Å: –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã –≤ GitHub. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. ‚úÖ –ö–æ–º–º–∏—Ç –∏ Push –≤ GitHub
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- –ö–æ–¥ –∑–∞–ø—É—à–µ–Ω –≤ main –≤–µ—Ç–∫—É
- Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∞–ª –¥–µ–ø–ª–æ–π

### 2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ Render
- –í–µ–±-—Å–µ—Ä–≤–∏—Å: **ai-video-bot-web** - Live ‚úÖ
- Worker —Å–µ—Ä–≤–∏—Å: **ai-video-bot-worker** - Live ‚úÖ  
- Redis —Å–µ—Ä–≤–∏—Å: **ai-video-redis** - Available ‚úÖ

### 3. ‚úÖ Health Check —Ä–∞–±–æ—Ç–∞–µ—Ç
```
https://video-bot25.onrender.com/health
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "status": "healthy",
  "service": "ai-video-generator-bot"
}
```

### 4. ‚úÖ Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω
Telegram webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞:
```
https://video-bot25.onrender.com/webhook
```

## –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### ‚ö†Ô∏è Redis Connection Issue

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
ConnectionError: Error 111 connecting to localhost:6379. Connection refused.
```

**–ü—Ä–∏—á–∏–Ω–∞:**
Environment variable `REDIS_URL` –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `localhost` –≤–º–µ—Å—Ç–æ Internal Redis URL.

**–†–µ—à–µ–Ω–∏–µ:**
–°–æ–∑–¥–∞–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- `RENDER_REDIS_FIX.md` - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `QUICK_FIX_REDIS.md` - –±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞ 2 –º–∏–Ω—É—Ç—ã

### –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–∫—Ä–∞—Ç–∫–æ):

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.render.com
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **ai-video-bot-web** ‚Üí Environment
3. –ù–∞–π–¥–∏—Ç–µ `REDIS_URL` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
   - Sync from Service: `ai-video-redis`
   - Property: `connectionString`
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è **ai-video-bot-worker**
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

## –°–æ–∑–¥–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **RENDER_DEPLOYMENT_GUIDE.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é
2. **DEPLOYMENT_FINAL_STEPS.md** - —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
3. **RENDER_REDIS_FIX.md** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Redis
4. **QUICK_FIX_REDIS.md** - –±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Redis
5. **setup_render_webhook_final.py** - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

### Web Service (ai-video-bot-web)
- ‚úÖ –°—Ç–∞—Ç—É—Å: Live
- ‚úÖ URL: https://video-bot25.onrender.com
- ‚úÖ Health check: —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Webhook endpoint: /webhook
- ‚ö†Ô∏è Redis: —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è REDIS_URL

### Worker Service (ai-video-bot-worker)
- ‚úÖ –°—Ç–∞—Ç—É—Å: Live
- ‚úÖ Celery: –∑–∞–ø—É—â–µ–Ω
- ‚ö†Ô∏è Redis: —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è REDIS_URL

### Redis Service (ai-video-redis)
- ‚úÖ –°—Ç–∞—Ç—É—Å: Available
- ‚úÖ Internal URL: –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ):
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å `REDIS_URL` –≤ environment variables (—Å–º. QUICK_FIX_REDIS.md)
2. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis:
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start` –±–æ—Ç—É
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis:
```
‚ùå –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
‚ùå Celery –∑–∞–¥–∞—á–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
‚ùå –û—à–∏–±–∫–∞: Connection refused to localhost:6379
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis:
```
‚úÖ –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
‚úÖ Celery –∑–∞–¥–∞—á–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
‚úÖ Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏
‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Render Dashboard:** https://dashboard.render.com
- **–í–µ–±-—Å–µ—Ä–≤–∏—Å:** https://video-bot25.onrender.com
- **Health Check:** https://video-bot25.onrender.com/health
- **GitHub Repo:** https://github.com/pilipandr770/video_bot25

## –õ–æ–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –í–µ–±-—Å–µ—Ä–≤–∏—Å (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis):
```
incoming_request method=POST path=/webhook
Text message received: user_id=..., chat_id=...
Video generation task started: job_id=...
```

### Worker —Å–µ—Ä–≤–∏—Å (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis):
```
celery@worker ready
Task video_generation_task started
generating_script
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **Task 30 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:**
- –ö–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ Render.com
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
- Health check —Ä–∞–±–æ—Ç–∞–µ—Ç
- Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π REDIS_URL –≤ environment variables
- –≠—Ç–æ –∑–∞–π–º–µ—Ç 2 –º–∏–Ω—É—Ç—ã (—Å–º. QUICK_FIX_REDIS.md)

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis –±–æ—Ç –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º! üéâ

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 13 –Ω–æ—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ production –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Redis
