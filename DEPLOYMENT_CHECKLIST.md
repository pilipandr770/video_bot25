# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render.com

## –°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –ö –î–ï–ü–õ–û–Æ üöÄ

---

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `render.yaml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Render (Docker runtime, Frankfurt)
- ‚úÖ `Dockerfile` - Docker –æ–±—Ä–∞–∑ —Å FFmpeg
- ‚úÖ `docker-compose.yml` - –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ `requirements.txt` - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ `main.py` - entry point –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ `.gitignore` - –∏—Å–∫–ª—é—á–∞–µ—Ç .env –∏ temp —Ñ–∞–π–ª—ã
- ‚úÖ `.env.example` - —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ `app/` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
  - ‚úÖ `app/bot/` - Telegram handlers
  - ‚úÖ `app/services/` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - ‚úÖ `app/tasks/` - Celery tasks
  - ‚úÖ `app/utils/` - —É—Ç–∏–ª–∏—Ç—ã
  - ‚úÖ `app/models/` - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `temp/` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–≤ .gitignore)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `README.md` - –æ–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `RENDER_DEPLOYMENT.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- ‚úÖ `DEPLOYMENT_CHECKLIST.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª
- ‚úÖ `WEBHOOK_SETUP.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
- ‚úÖ `DOCKER_RUN.md` - –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

---

## üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### render.yaml
- ‚úÖ Runtime: Docker (–¥–ª—è FFmpeg)
- ‚úÖ Region: Frankfurt (–±–ª–∏–∂–µ –∫ –ï–≤—Ä–æ–ø–µ)
- ‚úÖ Plan: Starter (–º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å Free –¥–ª—è Web)
- ‚úÖ Services:
  - ‚úÖ Web Service (ai-video-bot-web)
  - ‚úÖ Worker Service (ai-video-bot-worker)
  - ‚úÖ Redis Service (ai-video-redis)
- ‚úÖ Environment variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Disk storage –Ω–∞—Å—Ç—Ä–æ–µ–Ω (10GB web, 20GB worker)
- ‚úÖ Auto-deploy –≤–∫–ª—é—á–µ–Ω

### Dockerfile
- ‚úÖ Base image: python:3.11-slim
- ‚úÖ FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ apt-get
- ‚úÖ curl —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–¥–ª—è health checks)
- ‚úÖ PORT –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ Gunicorn –Ω–∞—Å—Ç—Ä–æ–µ–Ω (2 workers, 300s timeout)
- ‚úÖ Temp –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è

### docker-compose.yml
- ‚úÖ Redis service
- ‚úÖ Web service
- ‚úÖ Worker service
- ‚úÖ Health checks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Networks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Volumes –¥–ª—è temp —Ñ–∞–π–ª–æ–≤

---

## üîë API –∫–ª—é—á–∏ (–≥–æ—Ç–æ–≤—ã)

- ‚úÖ `TELEGRAM_BOT_TOKEN` - –ø–æ–ª—É—á–µ–Ω –æ—Ç @BotFather
- ‚úÖ `OPENAI_API_KEY` - –ø–æ–ª—É—á–µ–Ω –æ—Ç OpenAI
- ‚úÖ `OPENAI_ASSISTANT_ID` - Assistant —Å–æ–∑–¥–∞–Ω
- ‚úÖ `RUNWAY_API_KEY` - –ø–æ–ª—É—á–µ–Ω –æ—Ç Runway

**–í–∞–∂–Ω–æ:** –≠—Ç–∏ –∫–ª—é—á–∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤ Render Dashboard!

---

## üß™ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
- ‚úÖ Health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç (http://localhost:5000/health)
- ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- ‚úÖ FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Celery worker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ polling —Ä–µ–∂–∏–º–µ (test_bot_polling.py)

---

## üì¶ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
git status

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env –ù–ï –≤ —Å–ø–∏—Å–∫–µ
git check-ignore .env  # –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
git add .
git status
```

### –§–∞–π–ª—ã –¥–ª—è –∫–æ–º–º–∏—Ç–∞
- ‚úÖ –í—Å–µ .py —Ñ–∞–π–ª—ã
- ‚úÖ render.yaml
- ‚úÖ Dockerfile
- ‚úÖ docker-compose.yml
- ‚úÖ requirements.txt
- ‚úÖ .gitignore
- ‚úÖ .env.example
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (.md —Ñ–∞–π–ª—ã)

### –§–∞–π–ª—ã –ù–ï –¥–ª—è –∫–æ–º–º–∏—Ç–∞
- ‚ùå .env (—Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç—ã!)
- ‚ùå temp/ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
- ‚ùå __pycache__/ (Python cache)
- ‚ùå *.pyc (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)

---

## üöÄ –®–∞–≥–∏ –¥–µ–ø–ª–æ—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
# –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Ready for Render deployment"

# –ó–∞–ø—É—à—å—Ç–µ –≤ GitHub
git push origin main
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ Blueprint –Ω–∞ Render
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://render.com
2. New + ‚Üí Blueprint
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. Render –æ–±–Ω–∞—Ä—É–∂–∏—Ç render.yaml
5. –ù–∞–∂–º–∏—Ç–µ "Apply"

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Web Service:
```env
TELEGRAM_BOT_TOKEN=8370296832:AAETV_lHGioGKllkVraWZE2JUOKoFF0gZas
TELEGRAM_WEBHOOK_URL=https://ai-video-bot-web.onrender.com
OPENAI_API_KEY=sk-proj-...
OPENAI_ASSISTANT_ID=asst_...
RUNWAY_API_KEY=key_...
```

#### Worker Service:
```env
OPENAI_API_KEY=sk-proj-...
OPENAI_ASSISTANT_ID=asst_...
RUNWAY_API_KEY=key_...
```

### 4. –î–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏
- –î–æ–∂–¥–∏—Ç–µ—Å—å "Deploy succeeded"
- –ó–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç

### 5. –û–±–Ω–æ–≤–∏—Ç–µ TELEGRAM_WEBHOOK_URL
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –∏–∑ Render
- –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Render –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É
```bash
# Health check
curl https://ai-video-bot-web.onrender.com/health

# Webhook info
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start –±–æ—Ç—É –≤ Telegram
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:
1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ .env –ù–ï –≤ Git:**
   ```bash
   git check-ignore .env  # –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: .env
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ API –∫–ª—é—á–∏ –≤–∞–ª–∏–¥–Ω—ã:**
   - Telegram bot token —Ä–∞–±–æ—Ç–∞–µ—Ç
   - OpenAI API key –∞–∫—Ç–∏–≤–µ–Ω
   - Runway API key –∞–∫—Ç–∏–≤–µ–Ω

3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—É–±–ª–∏—á–Ω—ã–π –∏–ª–∏ Render –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø**

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
1. **–û–±–Ω–æ–≤–∏—Ç–µ TELEGRAM_WEBHOOK_URL** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Render URL
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞** –≤ Telegram
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env
- ‚ùå –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ API –∫–ª—é—á–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Environment Variables –≤ Render
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- Web: Free tier (750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü)
- Worker: Starter ($7/–º–µ—Å—è—Ü)
- Redis: Starter ($7/–º–µ—Å—è—Ü)
- **–ò—Ç–æ–≥–æ: $14/–º–µ—Å—è—Ü**

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- Web: Starter ($7/–º–µ—Å—è—Ü)
- Worker: Starter ($7/–º–µ—Å—è—Ü)
- Redis: Starter ($7/–º–µ—Å—è—Ü)
- **–ò—Ç–æ–≥–æ: $21/–º–µ—Å—è—Ü**

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π Redis (Upstash Free)
- Web –Ω–∞ Free tier
- Worker –Ω–∞ Starter
- **–ò—Ç–æ–≥–æ: $7/–º–µ—Å—è—Ü**

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:
- ‚úÖ CPU usage (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 80%)
- ‚úÖ Memory usage (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 80%)
- ‚úÖ Disk usage (—Å–ª–µ–¥–∏—Ç–µ –∑–∞ temp —Ñ–∞–π–ª–∞–º–∏)
- ‚úÖ Response time (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 2s)
- ‚úÖ Error rate (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 1%)

### –õ–æ–≥–∏:
- Web: incoming requests, webhook events
- Worker: Celery tasks, video generation
- Redis: connections, memory usage

---

## üéØ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

–ü–µ—Ä–µ–¥ –Ω–∞–∂–∞—Ç–∏–µ–º "Deploy":

- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- [ ] .env –ù–ï –≤ Git
- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–∞–ø—É—à–µ–Ω –≤ GitHub
- [ ] API –∫–ª—é—á–∏ –≥–æ—Ç–æ–≤—ã
- [ ] –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ Render —Å–æ–∑–¥–∞–Ω
- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è RENDER_DEPLOYMENT.md

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

- [ ] Health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## ‚úÖ –ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ!

–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `RENDER_DEPLOYMENT.md` –¥–ª—è –¥–µ–ø–ª–æ—è.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** 
```bash
git add .
git commit -m "Ready for Render deployment"
git push origin main
```

–ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ Blueprint –Ω–∞ Render.com!
